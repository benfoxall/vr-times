<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>VR Time</title>
    <link rel="stylesheet" href="//cdn.rawgit.com/milligram/milligram/master/dist/milligram.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>
  <body>
    <div class="container">

      <h1>WebVR Times</h1>

      <p>Transitioning to a WebVR session can take significant time. This is an attempt to track the differences between platforms/browsers.</p>

      <hr />


      <!-- TODO: generate automatically from data.json -->


      <h3 class="run-name">Pixel + Daydream</h3>
      <h4 class=run-credit><small>Captured 14/7/17 by @benjaminbenben <a href="https://www.youtube.com/watch?v=ezDDX1omHEI">(video)</a></small></h4>

      <h4>Total time: 23s</h4>
      <ul class="timeline">
        <li class="type-vrRequested">
          <span class="time">50.77,</span>
          <span class="label vrRequested">vrRequested</span>
        </li>
        <li class="type-note">
          <span class="time">52</span>
          <span class="label note">opening front</span>
        </li>
        <li class="type-note">
          <span class="time">56</span>
          <span class="label note">positioning phone</span>
        </li>
        <li class="type-note">
          <span class="time">58.5</span>
          <span class="label note">closed viewer</span>
        </li>
        <li class="type-note">
          <span class="time">64</span>
          <span class="label note">viewer on face</span>
        </li>
        <li class="type-note">
          <span class="time">66</span>
          <span class="label note">pairing controller</span>
        </li>
        <li class="type-vrPresenting">
          <span class="time">72.92</span>
          <span class="label vrPresenting">vrPresenting</span>
        </li>
        <li class="type-vrInteracting">
          <span class="time">74.04</span>
          <span class="label vrInteracting">vrInteracting</span>
        </li>
      </ul>

      <hr />


      <p>Contributions appreciated. If you have a device that supports WebVR head to <a href="capture.html">the capture page</a> to add more data</p>



      <style media="screen">
        .timeline{
          list-style: none;
          padding:0;
        }
        .timeline li {
          margin:0;
          border-left: 2px solid #08f;
          padding-left: .5em;
        }
        .timeline li.type-note {
          border-left-color: #fc0;
        }
        .time {
          font-size: 0.3em;
        }
        .run-name {
          margin-bottom: 0;
        }
        .run-credit {
          margin-top:0;
        }
      </style>

      <script>
        for(let timeline of document.querySelectorAll('.timeline')) {
          const entries = [].map.call(timeline.querySelectorAll('li'), (element) => ({
            element: element,
            time: parseFloat(element.querySelector('.time').innerText),
            label: element.querySelector('.label').innerText
          }))

          const range = entries.reduce((range, item) => {
            return {
              min: Math.min(range.min, item.time),
              max: Math.max(range.max, item.time)
            }
          }, {min: Number.MAX_VALUE, max: Number.MIN_VALUE})


          // Reduce the timings so they start at 0
          entries.forEach(m => {
            m.element.querySelector('.time').innerText =
              (m.time - range.min).toFixed(2) + 's'

          })


          entries.forEach(entry => {
            const distance = (entry.time - range.min) / (range.max - range.min)

            // space out to half width
            entry.element.style.marginLeft = (distance * 70) + '%'
            // console.log("X", prop)
          })

        }
      </script>

    </div>
  </body>
</html>
